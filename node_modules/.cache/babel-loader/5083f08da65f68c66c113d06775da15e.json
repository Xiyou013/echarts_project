{"ast":null,"code":"import dayjs from 'dayjs';\nimport { inject, nextTick, onMounted, reactive, ref } from 'vue';\nexport default {\n  __name: 'vehicleEchartsTwo',\n\n  setup(__props, {\n    expose\n  }) {\n    expose();\n    let echarts = inject('ec');\n    const colorList = ['#F1B164', '#05D2FC'];\n    let vehicle2 = 'vehicle2';\n    let myChart; // const changeSize = (val) => {\n    //     let nowClientWidth =\n    //         window.innerWidth || document.documentElement.clientWidth || document.body.clientWidth\n    //     // console.log('nowClientWidth', nowClientWidth)\n    //     return val * (nowClientWidth / 1920)\n    // }\n    // const nowSize = (val) => {\n    //     //   console.log(val instanceof Array)\n    //     let data = ''\n    //     let arr = []\n    //     if (typeof val === 'object') {\n    //         if (val instanceof Array) {\n    //             val.forEach((item) => {\n    //                 let size = changeSize(item)\n    //                 arr.push(size)\n    //             })\n    //             data = arr\n    //         }\n    //     } else {\n    //         data = changeSize(val)\n    //     }\n    //     //   console.log('data::', data)\n    //     return data\n    // }\n\n    const getListData = data => {\n      data.forEach((item, index) => {\n        item.lineStyle = {\n          color: colorList[index],\n          width: 2\n        };\n        item.yAxisIndex = index;\n      });\n    };\n\n    let time = ref([{\n      data: [500, 800, 500, 200, 505, 700, 900, 700, 505, 600, 800, 905, 800, 700, 500, 40, 60, 75, 70, 60, 400, 350, 600, 200],\n      type: 'line',\n      smooth: true,\n      symbol: 'none',\n      name: '小车1' // 对准左侧y轴\n      // yAxisIndex: 0\n\n    }, {\n      data: [0, 20, 40, 58, 62, 50, 35, 55, 60, 70, 75, 65, 50, 40, 50, 70, 80, 95, 80, 60, 55, 70, 90, 70],\n      type: 'line',\n      smooth: true,\n      symbol: 'none',\n      name: '小车2' // 对准右侧y轴\n      // yAxisIndex: 1\n\n    }]);\n    const data = reactive({\n      options: {\n        // 图例设置\n        // legend: {},\n        // 在canvas中占据的大小\n        grid: {\n          left: '0%',\n          right: '0%',\n          top: '15%',\n          bottom: '3%',\n          containLabel: true\n        },\n        // 辅助线提示\n        tooltip: {\n          trigger: 'axis'\n        },\n        xAxis: [{\n          type: 'category',\n          data: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun']\n        }],\n        yAxis: [{\n          type: 'value'\n        }],\n        axisLabel: {\n          // 坐标轴刻度标签的相关设置\n          show: true,\n          // 控制显隐\n          color: '#E4E9EB',\n          // x轴字体颜色\n          fontSize: 17,\n          //\n          margin: 15,\n          // x轴标签距离x轴距离\n          formatter: value => {\n            return dayjs(new Date(value)).format('HH:mm');\n          }\n        },\n        // x轴样式设置\n        axisLine: {\n          lineStyle: {\n            color: '#E4E9EB',\n            width: 2\n          }\n        },\n        // x轴刻度线显隐\n        axisTick: {\n          show: false\n        }\n      },\n      // 相关数据\n      series: time.value\n    }); // 初始化折线图\n\n    const initChart = () => {\n      // setTimeout(() => {\n      console.log('12132123'); // //检测是否已经存在echarts实例，如果不存在，则不再去初始化\n      // let myChart = echarts.getInstanceByDom(\n      //     document.getElementById('vehicle2')\n      // );\n      // if (myChart == null) {\n      //     console.log('123');\n      //     myChart = echarts.init(document.getElementById('vehicle2'));\n      //     myChart.setOption(data.options);\n      // }\n\n      myChart = echarts.init(document.getElementById(vehicle2));\n      myChart.setOption(data.options); // }, 2000)\n    }; // 监听更改折线图y轴有关数据\n    // const changeyAxis = () => {\n    //     data.options.yAxis[0].axisLabel.fontSize = nowSize(17)\n    //     data.options.yAxis[1].axisLabel.fontSize = nowSize(17)\n    //     data.options.yAxis[0].axisLabel.margin = nowSize(15)\n    //     data.options.yAxis[1].axisLabel.margin = nowSize(15)\n    //     data.options.yAxis[0].nameTextStyle.fontSize = nowSize(15)\n    //     data.options.yAxis[1].nameTextStyle.fontSize = nowSize(17)\n    //     data.options.yAxis[0].nameTextStyle.padding = nowSize([0, 50, 0, 0])\n    //     data.options.yAxis[1].nameTextStyle.padding = nowSize([0, 0, 0, 50])\n    //     data.options.yAxis[0].nameGap = nowSize(20)\n    //     data.options.yAxis[1].nameGap = nowSize(20)\n    //     data.options.yAxis[0].splitLine.lineStyle.width = nowSize(2)\n    //     data.options.yAxis[1].splitLine.lineStyle.width = nowSize(2)\n    // }\n    // 监听更改折线图x轴有关数据\n    // const changexAxis = () => {\n    //     data.options.xAxis.axisLabel.fontSize = nowSize(17)\n    //     data.options.xAxis.axisLabel.margin = nowSize(15)\n    //     data.options.xAxis.axisLine.lineStyle.width = nowSize(2)\n    // }\n\n\n    onMounted(() => {\n      getListData(time.value);\n      nextTick(() => {\n        initChart();\n      }); // initChart()\n    });\n\n    window.onresize = ec => {\n      // 监听窗口大小变化\n      // myChart.resize() // 自适应大小变化\n      console.log('22222222'); // changeyAxis()\n      // changexAxis()\n      // myChart.setOption(data.options)\n\n      myChart.resize(); // 自适应大小变化\n\n      if (ec) return;\n    };\n\n    const __returned__ = {\n      echarts,\n      colorList,\n      vehicle2,\n      myChart,\n      getListData,\n      time,\n      data,\n      initChart,\n      dayjs,\n      inject,\n      nextTick,\n      onMounted,\n      reactive,\n      ref\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n\n};","map":{"version":3,"mappings":"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","names":["dayjs","inject","nextTick","onMounted","reactive","ref","echarts","colorList","vehicle2","myChart","getListData","data","forEach","item","index","lineStyle","color","width","yAxisIndex","time","type","smooth","symbol","name","options","grid","left","right","top","bottom","containLabel","tooltip","trigger","xAxis","yAxis","axisLabel","show","fontSize","margin","formatter","value","Date","format","axisLine","axisTick","series","initChart","console","log","init","document","getElementById","setOption","window","onresize","ec","resize"],"sources":["F:/hub-code/echarts_project/src/views/test2/components/vehicleEchartsTwo.vue"],"sourcesContent":["<template>\r\n    <div ref=\"vehicle1\" :id=\"vehicle2\"></div>\r\n</template>\r\n\r\n<script setup>\r\nimport dayjs from 'dayjs'\r\nimport { inject, nextTick, onMounted, reactive, ref } from 'vue'\r\n\r\nlet echarts = inject('ec')\r\nconst colorList = ['#F1B164', '#05D2FC']\r\nlet vehicle2 = 'vehicle2'\r\nlet myChart\r\n\r\n// const changeSize = (val) => {\r\n//     let nowClientWidth =\r\n//         window.innerWidth || document.documentElement.clientWidth || document.body.clientWidth\r\n//     // console.log('nowClientWidth', nowClientWidth)\r\n//     return val * (nowClientWidth / 1920)\r\n// }\r\n\r\n// const nowSize = (val) => {\r\n//     //   console.log(val instanceof Array)\r\n//     let data = ''\r\n//     let arr = []\r\n//     if (typeof val === 'object') {\r\n//         if (val instanceof Array) {\r\n//             val.forEach((item) => {\r\n//                 let size = changeSize(item)\r\n//                 arr.push(size)\r\n//             })\r\n//             data = arr\r\n//         }\r\n//     } else {\r\n//         data = changeSize(val)\r\n//     }\r\n//     //   console.log('data::', data)\r\n//     return data\r\n// }\r\n\r\nconst getListData = (data) => {\r\n    data.forEach((item, index) => {\r\n        item.lineStyle = {\r\n            color: colorList[index],\r\n            width: 2\r\n        }\r\n        item.yAxisIndex = index\r\n    })\r\n}\r\n\r\nlet time = ref([\r\n    {\r\n        data: [\r\n            500, 800, 500, 200, 505, 700, 900, 700, 505, 600, 800, 905, 800, 700, 500, 40, 60, 75, 70, 60,\r\n            400, 350, 600, 200\r\n        ],\r\n        type: 'line',\r\n        smooth: true,\r\n        symbol: 'none',\r\n        name: '小车1'\r\n        // 对准左侧y轴\r\n        // yAxisIndex: 0\r\n    },\r\n    {\r\n        data: [\r\n            0, 20, 40, 58, 62, 50, 35, 55, 60, 70, 75, 65, 50, 40, 50, 70, 80, 95, 80, 60, 55, 70, 90, 70\r\n        ],\r\n        type: 'line',\r\n        smooth: true,\r\n        symbol: 'none',\r\n        name: '小车2'\r\n        // 对准右侧y轴\r\n        // yAxisIndex: 1\r\n    }\r\n])\r\n\r\nconst data = reactive({\r\n    options: {\r\n        // 图例设置\r\n        // legend: {},\r\n        // 在canvas中占据的大小\r\n        grid: {\r\n            left: '0%',\r\n            right: '0%',\r\n            top: '15%',\r\n            bottom: '3%',\r\n            containLabel: true\r\n        },\r\n        // 辅助线提示\r\n        tooltip: {\r\n            trigger: 'axis'\r\n        },\r\n        xAxis: [\r\n            {\r\n                type: 'category',\r\n                data: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun']\r\n            }\r\n        ],\r\n        yAxis: [\r\n            {\r\n                type: 'value'\r\n            }\r\n        ],\r\n        axisLabel: {\r\n            // 坐标轴刻度标签的相关设置\r\n            show: true, // 控制显隐\r\n            color: '#E4E9EB', // x轴字体颜色\r\n            fontSize: 17, //\r\n            margin: 15, // x轴标签距离x轴距离\r\n            formatter: (value) => {\r\n                return dayjs(new Date(value)).format('HH:mm')\r\n            }\r\n        },\r\n        // x轴样式设置\r\n        axisLine: {\r\n            lineStyle: {\r\n                color: '#E4E9EB',\r\n                width: 2\r\n            }\r\n        },\r\n        // x轴刻度线显隐\r\n        axisTick: {\r\n            show: false\r\n        }\r\n    },\r\n    // 相关数据\r\n    series: time.value\r\n})\r\n\r\n// 初始化折线图\r\nconst initChart = () => {\r\n    // setTimeout(() => {\r\n    console.log('12132123');\r\n    // //检测是否已经存在echarts实例，如果不存在，则不再去初始化\r\n    // let myChart = echarts.getInstanceByDom(\r\n    //     document.getElementById('vehicle2')\r\n    // );\r\n    // if (myChart == null) {\r\n    //     console.log('123');\r\n    //     myChart = echarts.init(document.getElementById('vehicle2'));\r\n    //     myChart.setOption(data.options);\r\n    // }\r\n\r\n    myChart = echarts.init(document.getElementById(vehicle2))\r\n    myChart.setOption(data.options)\r\n    // }, 2000)\r\n\r\n}\r\n// 监听更改折线图y轴有关数据\r\n// const changeyAxis = () => {\r\n//     data.options.yAxis[0].axisLabel.fontSize = nowSize(17)\r\n//     data.options.yAxis[1].axisLabel.fontSize = nowSize(17)\r\n//     data.options.yAxis[0].axisLabel.margin = nowSize(15)\r\n//     data.options.yAxis[1].axisLabel.margin = nowSize(15)\r\n//     data.options.yAxis[0].nameTextStyle.fontSize = nowSize(15)\r\n//     data.options.yAxis[1].nameTextStyle.fontSize = nowSize(17)\r\n//     data.options.yAxis[0].nameTextStyle.padding = nowSize([0, 50, 0, 0])\r\n//     data.options.yAxis[1].nameTextStyle.padding = nowSize([0, 0, 0, 50])\r\n//     data.options.yAxis[0].nameGap = nowSize(20)\r\n//     data.options.yAxis[1].nameGap = nowSize(20)\r\n//     data.options.yAxis[0].splitLine.lineStyle.width = nowSize(2)\r\n//     data.options.yAxis[1].splitLine.lineStyle.width = nowSize(2)\r\n// }\r\n// 监听更改折线图x轴有关数据\r\n// const changexAxis = () => {\r\n//     data.options.xAxis.axisLabel.fontSize = nowSize(17)\r\n//     data.options.xAxis.axisLabel.margin = nowSize(15)\r\n//     data.options.xAxis.axisLine.lineStyle.width = nowSize(2)\r\n// }\r\n\r\nonMounted(() => {\r\n    getListData(time.value)\r\n    nextTick(() => {\r\n        initChart()\r\n    })\r\n    // initChart()\r\n})\r\nwindow.onresize = (ec) => {\r\n    // 监听窗口大小变化\r\n    // myChart.resize() // 自适应大小变化\r\n    console.log('22222222')\r\n    // changeyAxis()\r\n    // changexAxis()\r\n    // myChart.setOption(data.options)\r\n    myChart.resize() // 自适应大小变化\r\n    if (ec) return\r\n}\r\n</script>\r\n\r\n<style>\r\n.vehicle_echarts {\r\n    width: 92vw;\r\n    height: 28vh;\r\n    /* background-color: blanchedalmond; */\r\n    opacity: 0.7;\r\n    font-size: 1.3vw;\r\n}\r\n\r\n.vehicle_echarts1 {\r\n    width: 65vw;\r\n    height: 35vh;\r\n    /* background-color: blanchedalmond; */\r\n    opacity: 0.7;\r\n    font-size: 1.3vw;\r\n}\r\n\r\n#vehicle2 {\r\n    width: 90%;\r\n    /* height: 100%; */\r\n    height: inherit;\r\n    margin-left: 5%;\r\n}\r\n</style>\r\n"]},"metadata":{},"sourceType":"module"}