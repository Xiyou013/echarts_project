{"ast":null,"code":"import { createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, vModelText as _vModelText, withDirectives as _withDirectives, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, createBlock as _createBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-20c55a23\"), n = n(), _popScopeId(), n);\n\nconst _hoisted_1 = {\n  class: \"addbtn\"\n};\n\nconst _hoisted_2 = /*#__PURE__*/_createTextVNode(\"新增\");\n\nconst _hoisted_3 = /*#__PURE__*/_createTextVNode(\"编辑\");\n\nconst _hoisted_4 = /*#__PURE__*/_createTextVNode(\"查看\");\n\nconst _hoisted_5 = /*#__PURE__*/_createTextVNode(\"删除\");\n\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_el_button = _resolveComponent(\"el-button\");\n\n  const _component_el_option = _resolveComponent(\"el-option\");\n\n  const _component_el_select = _resolveComponent(\"el-select\");\n\n  const _component_el_table_column = _resolveComponent(\"el-table-column\");\n\n  const _component_el_table = _resolveComponent(\"el-table\");\n\n  const _component_AddDialog = _resolveComponent(\"AddDialog\");\n\n  const _component_DetailDrawer = _resolveComponent(\"DetailDrawer\");\n\n  return _openBlock(), _createElementBlock(_Fragment, null, [_createElementVNode(\"div\", _hoisted_1, [_createVNode(_component_el_button, {\n    type: \"primary\",\n    size: \"small\",\n    class: \"add-btn\",\n    onClick: _cache[0] || (_cache[0] = $event => $setup.addPerson(false))\n  }, {\n    default: _withCtx(() => [_hoisted_2]),\n    _: 1\n    /* STABLE */\n\n  })]), _createTextVNode(\" \" + _toDisplayString($setup.test) + \" \", 1\n  /* TEXT */\n  ), _withDirectives(_createElementVNode(\"input\", {\n    type: \"text\",\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $setup.test = $event)\n  }, null, 512\n  /* NEED_PATCH */\n  ), [[_vModelText, $setup.test]]), _createVNode(_component_el_select, {\n    modelValue: $setup.test,\n    \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $setup.test = $event),\n    placeholder: \"请选择属性\"\n  }, {\n    default: _withCtx(() => [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.listTest, (item, index) => {\n      return _openBlock(), _createBlock(_component_el_option, {\n        key: index,\n        label: item.name,\n        value: item.type\n      }, null, 8\n      /* PROPS */\n      , [\"label\", \"value\"]);\n    }), 128\n    /* KEYED_FRAGMENT */\n    ))]),\n    _: 1\n    /* STABLE */\n\n  }, 8\n  /* PROPS */\n  , [\"modelValue\"]), _createVNode(_component_el_table, {\n    data: $setup.persondata.personList,\n    stripe: \"\",\n    style: {\n      \"width\": \"100%\"\n    }\n  }, {\n    default: _withCtx(() => [_createVNode(_component_el_table_column, {\n      prop: \"name\",\n      label: \"姓名\",\n      width: \"180\"\n    }), _createVNode(_component_el_table_column, {\n      prop: \"type\",\n      label: \"类型\",\n      width: \"180\",\n      formatter: $setup.formatAttribute\n    }, null, 8\n    /* PROPS */\n    , [\"formatter\"]), _createVNode(_component_el_table_column, {\n      prop: \"\",\n      label: \"操作\"\n    }, {\n      default: _withCtx(scope => [_createVNode(_component_el_button, {\n        type: \"primary\",\n        size: \"small\",\n        onClick: $event => $setup.addPerson(true, scope.row)\n      }, {\n        default: _withCtx(() => [_hoisted_3]),\n        _: 2\n        /* DYNAMIC */\n\n      }, 1032\n      /* PROPS, DYNAMIC_SLOTS */\n      , [\"onClick\"]), _createVNode(_component_el_button, {\n        type: \"info\",\n        size: \"small\",\n        plain: \"\",\n        onClick: $setup.onDetails\n      }, {\n        default: _withCtx(() => [_hoisted_4]),\n        _: 1\n        /* STABLE */\n\n      }, 8\n      /* PROPS */\n      , [\"onClick\"]), _createVNode(_component_el_button, {\n        type: \"danger\",\n        size: \"small\",\n        onClick: $event => $setup.onDelete(scope.row, scope.$index)\n      }, {\n        default: _withCtx(() => [_hoisted_5]),\n        _: 2\n        /* DYNAMIC */\n\n      }, 1032\n      /* PROPS, DYNAMIC_SLOTS */\n      , [\"onClick\"])]),\n      _: 1\n      /* STABLE */\n\n    })]),\n    _: 1\n    /* STABLE */\n\n  }, 8\n  /* PROPS */\n  , [\"data\"]), _createVNode(_component_AddDialog, {\n    dialogVisible: $setup.dialogFormVisible,\n    onChangeDialog: $setup.changeDialog,\n    onChangeIsEdit: $setup.changeIsEdit,\n    isEdit: $setup.isEdit,\n    id: $setup.id\n  }, null, 8\n  /* PROPS */\n  , [\"dialogVisible\", \"onChangeDialog\", \"onChangeIsEdit\", \"isEdit\", \"id\"]), _createVNode(_component_DetailDrawer, {\n    drawer: _ctx.drawerDetail,\n    onChangeDrawer: $setup.changeDrawer\n  }, null, 8\n  /* PROPS */\n  , [\"drawer\", \"onChangeDrawer\"])], 64\n  /* STABLE_FRAGMENT */\n  );\n}","map":{"version":3,"mappings":";;;;;EACOA,KAAK,EAAC;;;iDAMN;;iDA2BI;;iDAGA;;iDAMA;;;;;;;;;;;;;;;;;6DA1CTC,oBAQM,KARN,cAQM,CAPJC,aAMCC,oBAND,EAMC;IALCC,IAAI,EAAC,SAKN;IAJCC,IAAI,EAAC,OAIN;IAHCL,KAAK,EAAC,SAGP;IAFEM,OAAK,sCAAEC,iBAAS,KAAT,CAAF;EAEP,CAND;sBAKG,MAAE;;;;GALL,CAOI,CARN,oBAQM,MACNC,iBAAGD,WAAH,CADM,GACI,KACV;EAAA;qBAAAN,oBAAoC,OAApC,EAAoC;IAA7BG,IAAI,EAAC,MAAwB;+DAARG,cAAIE;EAAI,CAApC;;EAAA,kBAA4BF,gBAC5BL,aAOYQ,oBAPZ,EAOY;gBAPQH,WAOR;+DAPQA,cAAIE,OAOZ;IAPcE,WAAW,EAAC;EAO1B,CAPZ;sBAEI,MAAiC,oBADnCC,oBAKEC,SALF,EAKE,IALF,EAKEC,YAJwBP,eAIxB,EAJgC,CAAxBQ,IAAwB,EAAlBC,KAAkB,KAAb;2BADrBC,aAKEC,oBALF,EAKE;QAHCC,GAAG,EAAEH,KAGN;QAFCI,KAAK,EAAEL,IAAI,CAACM,IAEb;QADCC,KAAK,EAAEP,IAAI,CAACX;MACb,CALF;;MAAA;KAKE,CALF;;IAAA,CACmC;;;;GAFrC;;EAAA,mBAQAF,aA2BWqB,mBA3BX,EA2BW;IA3BAC,IAAI,EAAEjB,kBAAWkB,UA2BjB;IA3B6BC,MAAM,EAAN,EA2B7B;IA3BoCC,KAAmB,EAAnB;MAAA;IAAA;EA2BpC,CA3BX;sBACE,MAAsD,CAAtDzB,aAAsD0B,0BAAtD,EAAsD;MAArCC,IAAI,EAAC,MAAgC;MAAzBT,KAAK,EAAC,IAAmB;MAAdU,KAAK,EAAC;IAAQ,CAAtD,CAAsD,EACtD5B,aAKE0B,0BALF,EAKE;MAJAC,IAAI,EAAC,MAIL;MAHAT,KAAK,EAAC,IAGN;MAFAU,KAAK,EAAC,KAEN;MADCC,SAAS,EAAExB;IACZ,CALF;;IAAA,gBADsD,EAOtDL,aAkBkB0B,0BAlBlB,EAkBkB;MAlBDC,IAAI,EAAC,EAkBJ;MAlBOT,KAAK,EAAC;IAkBb,CAlBlB;MACaY,OAAO,WAAEC,KAClB,IADuB,CACvB/B,aAKCC,oBALD,EAKC;QAJCC,IAAI,EAAC,SAIN;QAHCC,IAAI,EAAC,OAGN;QAFEC,OAAK,YAAEC,iBAAS,IAAT,EAAgB0B,KAAK,CAACC,GAAtB;MAET,CALD;0BAIG,MAAE;;;;OAJL;;MAAA,cADuB,EAOvBhC,aAECC,oBAFD,EAEC;QAFUC,IAAI,EAAC,MAEf;QAFsBC,IAAI,EAAC,OAE3B;QAFmC8B,KAAK,EAAL,EAEnC;QAF0C7B,OAAK,EAAEC;MAEjD,CAFD;0BACG,MAAE;;;;OADL;;MAAA,cAPuB,EAUvBL,aAKCC,oBALD,EAKC;QAJCC,IAAI,EAAC,QAIN;QAHCC,IAAI,EAAC,OAGN;QAFEC,OAAK,YAAEC,gBAAS0B,KAAK,CAACC,GAAf,EAAoBD,KAAK,CAACG,MAA1B;MAET,CALD;0BAIG,MAAE;;;;OAJL;;MAAA,cAVuB,CAAP;;;;KADpB,CAPsD;;;;GADxD;;EAAA,aA4BAlC,aAMamC,oBANb,EAMa;IALVC,aAAa,EAAE/B,wBAKL;IAJVgC,cAAY,EAAEhC,mBAIJ;IAHViC,cAAY,EAAEjC,mBAGJ;IAFVkC,MAAM,EAAElC,aAEE;IADVmC,EAAE,EAAEnC;EACM,CANb;;EAAA,0EAOAL,aAGgByC,uBAHhB,EAGgB;IAFbC,MAAM,EAAEC,iBAEK;IADbC,cAAY,EAAEvC;EACD,CAHhB;;EAAA","names":["class","_createElementVNode","_createVNode","_component_el_button","type","size","onClick","$setup","_toDisplayString","$event","_component_el_select","placeholder","_createElementBlock","_Fragment","_renderList","item","index","_createBlock","_component_el_option","key","label","name","value","_component_el_table","data","personList","stripe","style","_component_el_table_column","prop","width","formatter","default","scope","row","plain","$index","_component_AddDialog","dialogVisible","onChangeDialog","onChangeIsEdit","isEdit","id","_component_DetailDrawer","drawer","_ctx","onChangeDrawer"],"sourceRoot":"","sources":["F:\\hub-code\\echarts_project\\src\\components\\personList.vue"],"sourcesContent":["<template>\r\n  <div class=\"addbtn\">\r\n    <el-button\r\n      type=\"primary\"\r\n      size=\"small\"\r\n      class=\"add-btn\"\r\n      @click=\"addPerson(false)\"\r\n      >新增</el-button\r\n    >\r\n  </div>\r\n  {{ test }}\r\n  <input type=\"text\" v-model=\"test\" />\r\n  <el-select v-model=\"test\" placeholder=\"请选择属性\">\r\n    <el-option\r\n      v-for=\"(item, index) in listTest\"\r\n      :key=\"index\"\r\n      :label=\"item.name\"\r\n      :value=\"item.type\"\r\n    />\r\n  </el-select>\r\n  <el-table :data=\"persondata.personList\" stripe style=\"width: 100%\">\r\n    <el-table-column prop=\"name\" label=\"姓名\" width=\"180\" />\r\n    <el-table-column\r\n      prop=\"type\"\r\n      label=\"类型\"\r\n      width=\"180\"\r\n      :formatter=\"formatAttribute\"\r\n    />\r\n    <el-table-column prop=\"\" label=\"操作\">\r\n      <template #default=\"scope\">\r\n        <el-button\r\n          type=\"primary\"\r\n          size=\"small\"\r\n          @click=\"addPerson(true, scope.row)\"\r\n          >编辑</el-button\r\n        >\r\n        <el-button type=\"info\" size=\"small\" plain @click=\"onDetails\"\r\n          >查看</el-button\r\n        >\r\n        <el-button\r\n          type=\"danger\"\r\n          size=\"small\"\r\n          @click=\"onDelete(scope.row, scope.$index)\"\r\n          >删除</el-button\r\n        >\r\n      </template>\r\n    </el-table-column>\r\n  </el-table>\r\n  <AddDialog\r\n    :dialogVisible=\"dialogFormVisible\"\r\n    @changeDialog=\"changeDialog\"\r\n    @changeIsEdit=\"changeIsEdit\"\r\n    :isEdit=\"isEdit\"\r\n    :id=\"id\"\r\n  ></AddDialog>\r\n  <DetailDrawer\r\n    :drawer=\"drawerDetail\"\r\n    @changeDrawer=\"changeDrawer\"\r\n  ></DetailDrawer>\r\n</template>\r\n\r\n<script>\r\nimport { attribute } from \"@/utils/enum\";\r\nimport { onMounted, reactive, ref, toRefs, watch } from \"@vue/runtime-core\";\r\nimport AddDialog from \"@/components/addDialog.vue\";\r\nimport DetailDrawer from \"@/components/detailDrawer.vue\";\r\n// import { reactive } from '@vue/reactivity';\r\nimport btnRestore from \"@/utils/btnRestore\";\r\nimport store from \"@/store\";\r\n\r\nexport default {\r\n  components: { AddDialog, DetailDrawer },\r\n  name: \"personList\",\r\n  props: {\r\n    searchFrom: {\r\n      type: Object,\r\n      default: () => {},\r\n    },\r\n  },\r\n  setup(props) {\r\n    // let personList = personList;\r\n    let state = reactive(store.state.Original_god);\r\n    console.log(state.list);\r\n\r\n    let drawerDetail = reactive({\r\n      drawerDetail: false,\r\n    });\r\n    let dialogFormVisible = reactive({\r\n      dialogFormVisible: false,\r\n    });\r\n\r\n    let isEdit = reactive({\r\n      isEdit: false,\r\n    });\r\n\r\n    let id = ref(null);\r\n\r\n    let persondata = reactive({\r\n      personList: [],\r\n    });\r\n\r\n    let test = ref(null);\r\n    const listTest = [\r\n      {}\r\n    ]\r\n\r\n    onMounted(() => {\r\n      persondata.personList = state.list;\r\n      console.log(\"---onMounted.searchFrom---:\", props.searchFrom);\r\n    });\r\n    watch(props.searchFrom, (newValue, oldValue) => {\r\n      if (newValue.isSearch) {\r\n        console.log(\"---searchFrom---\", newValue, oldValue);\r\n        searchList(newValue);\r\n        test.value = props.searchFrom.name;\r\n        console.log(\"---watch.test---:\", test.value);\r\n      }\r\n      if (newValue.name == \"\" && newValue.attribute == \"\") {\r\n        persondata.personList = state.list;\r\n      }\r\n      if (newValue || oldValue) return;\r\n    });\r\n    function addPerson(value, row) {\r\n      dialogFormVisible.dialogFormVisible = true;\r\n      isEdit.isEdit = value;\r\n      if (value && row) {\r\n        id.value = row.id;\r\n      } else {\r\n        // id.value = null\r\n      }\r\n      console.log(\"---addPerson.dialogFormVisible---\", dialogFormVisible);\r\n      btnRestore(event);\r\n    }\r\n    function formatAttribute(row) {\r\n      let personType;\r\n      attribute.forEach((element) => {\r\n        if (element.type === row.type) {\r\n          personType = element.name;\r\n        }\r\n      });\r\n      return personType;\r\n    }\r\n    function searchList(element) {\r\n      persondata.personList = state.list.filter((item) => {\r\n        // console.log('---item---',item)\r\n        // console.log('---element---',element)\r\n        if (element.name && element.attribute) {\r\n          return element.name === item.name && element.attribute === item.type;\r\n        } else {\r\n          return element.name === item.name || element.attribute === item.type;\r\n        }\r\n      });\r\n    }\r\n    function changeDialog() {\r\n      dialogFormVisible.dialogFormVisible = false;\r\n      // isEdit.isEdit = value;\r\n      //   id.value = null\r\n      //   console.log(\"---changeDialog.value---\", value);\r\n    }\r\n    function changeIsEdit(value) {\r\n      isEdit.isEdit = value;\r\n    }\r\n    function changeDrawer() {\r\n      drawerDetail.drawerDetail = false;\r\n    }\r\n    function onDetails() {\r\n      drawerDetail.drawerDetail = true;\r\n      console.log(\"---onDetails.drawerDetail---\", drawerDetail);\r\n      btnRestore(event);\r\n    }\r\n    function onDelete(row, index) {\r\n      console.log(\"---onDelete.row---\", row, index);\r\n      persondata.personList.splice(index, 1);\r\n      store.commit(\"changeList\", persondata.personList);\r\n      console.log(\r\n        \"---persondata.personList and state.list---\",\r\n        persondata.personList,\r\n        state.list\r\n      );\r\n      btnRestore(event);\r\n    }\r\n\r\n    return {\r\n      persondata,\r\n      dialogFormVisible,\r\n      isEdit,\r\n      id,\r\n      ...toRefs(drawerDetail),\r\n      addPerson,\r\n      formatAttribute,\r\n      changeDialog,\r\n      onDetails,\r\n      onDelete,\r\n      changeDrawer,\r\n      changeIsEdit,\r\n      test,\r\n      listTest\r\n    };\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.add-btn {\r\n  width: 65px;\r\n  letter-spacing: 3px;\r\n  position: relative;\r\n  left: 15px;\r\n  top: -10px;\r\n}\r\n</style>"]},"metadata":{},"sourceType":"module"}